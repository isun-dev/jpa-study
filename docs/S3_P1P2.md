# 영속성 컨텍스트(논리적인 개념)

- 엔티티를 영구 저장하는 환경.
- persist는 사실상 영속성 컨텍스트에 저장을 하는 것임
- 엔티티 매니저를 통해서 영속성 컨텍스트에 접근

## 영속성 컨텍스트는 메모리에 저장되는가?

- JVM의 힙메모리에 저장된다.

# 엔티티의 생명주기

## 비영속 (new/transient)

- 영속성 컨텍스트와 전혀 관계가 없는 새로운 상태

## 영속 (managed)

- 영속성 컨텍스트에 관리되는 상태

## 준영속 (detached)

- 영속성 컨텍스트에 저장되었다가 분리된 상태

## 삭제 (removed)

- 삭제된 상태 (DB에서 테이블 삭제됨)

# 영속성 컨텍스트의 이점

## 1차 캐시

- 엔티티 매니저는 트랜잭션 단위로 생성이 되는 것이기 때문에, 성능상에 크게 도움은 되지 않으나, 컨셉자체가 도움이 된다고 함.

## 영속동일성(identity) 보장

## 트랜잭션을 지원하는 쓰기 지연 (transactional write-behind)

- 쓰기 지연 sql 저장소가 있음.

## 변경 감지(Dirty Checking)
- 

## 지연 로딩(Lazy Loading)

# 버퍼링

- <property name="hibernate.jdbc.batch_size" value="10"/>
- 위 사이즈 만큼 모아서 DB에 commit을 한다.



